<h2 mat-dialog-title align="center" class="justify-content-center" style="background-color: #002D5D;">
    <span style="color: white; font-weight: bold; font-size: x-large;">
        {{"ARTICLE.MODAL.MODIFYARTICLE" | translate}}
    </span>
</h2>

<mat-dialog-content style="overflow-y: auto; overflow-x: hidden; min-width: 350px;" class="pt-2">
    <form [formGroup]="modifyForm">
        <div class="row justify-content-center">

            <!-- UNIT AVAILABLE OR SERIAL NUMBER -->
            <div class="col-12 col-md-4" [ngStyle]="{'border-right': !isSmall ? '1px solid lightgray' : 'none'}">
                <div class="row">
                    <div class="col-3 col-md-6 p-1">
                        <label class="form-label" for="unit_available">
                            {{"ARTICLE.MODAL.UNIT" | translate}}
                        </label>
                        <input class="form-control" type="number" min="1" id="unit_available"
                            formControlName="unit_available" (keydown)="blockInvalidInput($event)"
                            [class.is-invalid]="modifyForm.get('unit_available')?.invalid && submitted">
                    </div>
                    <!-- <div *ngIf="management_type == 2" class="col-3 col-md-6 p-1">
                        <label class="form-label" for="qnt_available">
                            {{"ARTICLE.MODAL.QUANTITY" | translate}}
                        </label>
                        <input class="form-control" type="number" min="1" id="qnt_available"
                            formControlName="qnt_available" (keydown)="blockInvalidInput($event)">
                    </div> -->
                    <div *ngIf="management_type != 0" class="col-6 col-md-12 p-1">
                        <label class="form-label" for="serialnumber">
                            <span *ngIf="!isSmall; else smallBlockS">
                                {{"ARTICLE.MODAL.SERIALNUMBER" | translate}}
                            </span>
                            <ng-template #smallBlockS>
                                <span>
                                    {{"ARTICLE.MODAL.SN" | translate}}
                                </span>
                            </ng-template>
                        </label>
                        <input class="form-control" type="text" id="serialnumber" formControlName="serialnumber">
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-8 p-0">
                <div class="row justify-content-center m-0 p-0">
                    <!-- UNIT TAXABLE PURCHASE -->
                    <div class="col-4 p-1">
                        <label class="form-label" for="unit_taxablepurchase">
                            <ng-container *ngIf="!isSmall; else smallBlockA">
                                {{"ARTICLE.MODAL.TAXABLEPURCHASE" | translate}}
                            </ng-container>
                            <ng-template #smallBlockA>
                                {{"ARTICLE.MODAL.TAXABLEPURCHASESM" | translate}}
                            </ng-template>
                        </label>
                        <div class="input-group">
                            <input class="form-control ps-1 pe-1" type="text" id="unit_taxablepurchase"
                                formControlName="unit_taxablepurchase"
                                [class.is-invalid]="modifyForm.get('unit_taxablepurchase')?.invalid">
                            <span class="input-group-text">€</span>
                        </div>
                    </div>
                    <!-- VAT PURCHASE -->
                    <div class="col-4 col-lg-2 p-1">
                        <label class="form-label" for="vatpurchase">
                            {{"ARTICLE.MODAL.VAT" | translate}}
                        </label>
                        <div class="input-group">
                            <input class="form-control vatPadding" type="text" id="vatpurchase"
                                formControlName="vatpurchase"
                                [class.is-invalid]="modifyForm.get('vatpurchase')?.invalid">
                            <span class="input-group-text vatPadding" id="vatpurchase">%</span>
                        </div>
                    </div>
                    <!-- UNIT PRICE PURCHASE -->
                    <div class="col-4 p-1">
                        <label class="form-label" for="pricepurchase">
                            <span *ngIf="!isSmall; else smallBlockA">
                                {{"ARTICLE.MODAL.PRICEPURCHASE" | translate}}
                            </span>
                            <ng-template #smallBlockA>
                                <span>
                                    {{"ARTICLE.MODAL.PRICEPURCHASESM" | translate}}
                                </span>
                            </ng-template>
                        </label>
                        <div class="input-group">
                            <input class="form-control ps-1 pe-1" type="text" id="pricepurchase"
                                formControlName="pricepurchase">
                            <span class="input-group-text">€</span>
                        </div>
                    </div>

                    <!-- UNIT TAXABLE RECOMMENDED -->
                    <div class="col-4 p-1">
                        <label class="form-label" for="unit_taxablerecommended">
                            <span *ngIf="!isSmall; else smallBlockC">
                                {{"ARTICLE.MODAL.TAXABLERECOMMENDED" | translate}}
                            </span>
                            <ng-template #smallBlockC>
                                <span>
                                    {{"ARTICLE.MODAL.TAXABLERECOMMENDEDSM" | translate}}
                                </span>
                            </ng-template>
                        </label>
                        <div class="input-group">
                            <input class="form-control ps-1 pe-1" type="text" id="unit_taxablerecommended"
                                formControlName="unit_taxablerecommended"
                                [class.is-invalid]="modifyForm.get('unit_taxablerecommended')?.invalid">
                            <span class="input-group-text">€</span>
                        </div>
                    </div>
                    <!-- VAT RECOMMENDED -->
                    <div class="col-4 col-lg-2 p-1">
                        <label class="form-label" for="vatrecommended">
                            {{"ARTICLE.MODAL.VAT" | translate}}
                        </label>
                        <div class="input-group">
                            <input class="form-control vatPadding" type="text" id="vatrecommended"
                                formControlName="vatrecommended"
                                [class.is-invalid]="modifyForm.get('vatrecommended')?.invalid">
                            <span class="input-group-text vatPadding" id="vatrecommended">%</span>
                        </div>
                    </div>
                    <!-- UNIT PRICE RECOMMENDED -->
                    <div class="col-4 p-1">
                        <label class="form-label" for="pricerecommended">
                            <span *ngIf="!isSmall; else smallBlockC">
                                {{"ARTICLE.MODAL.PRICERECOMMENDED" | translate}}
                            </span>
                            <ng-template #smallBlockC>
                                <span>
                                    {{"ARTICLE.MODAL.PRICERECOMMENDEDSM" | translate}}
                                </span>
                            </ng-template>
                        </label>
                        <div class="input-group">
                            <input class="form-control ps-1 pe-1" type="text" id="pricerecommended"
                                formControlName="pricerecommended">
                            <span class="input-group-text">€</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="modifyForm.get('unit_taxablepurchase')?.hasError('invalidNumber') || 
            modifyForm.get('unit_taxablerecommended')?.hasError('invalidNumber')" class="row mt-1">
            <div class="col-12 text-center">
                <span class="errorTxt">
                    I campi relativi all'imponibile possono contenere solo valori numerici con al più due decimali dopo
                    la virgola
                </span>
            </div>
        </div>
        <div *ngIf=" modifyForm.get('vatrecommended')?.hasError('integerRangeInvalid') || 
            modifyForm.get('vatpurchase')?.hasError('integerRangeInvalid')" class="row mt-1">
            <div class="col-12 text-center">
                <span class="errorTxt">
                    I campi relativi all'Iva possono contenere solo valori numerici compresi tra 0 e 100
                </span>
            </div>
        </div>
        <div *ngIf="submitted && modifyForm.invalid" class="row mt-1">
            <div class="col-12 text-center">
                <span class="errorTxt">
                    Compilare correttamente i campi obbligatori
                </span>
            </div>
        </div>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end" style="border-top: 1px solid lightgray;">
    <button class="btn btn-outline-dark me-2" style="width: 100px;" (click)="close()">
        {{"ARTICLE.MODAL.CANCEL" | translate }}
    </button>
    <button class="btn btn-outline-success me-2" (click)="modifyUnit()">
        Modifica
    </button>
</mat-dialog-actions>