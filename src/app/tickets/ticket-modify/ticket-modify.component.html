<div class="container-fluid p-1 p-md-2 p-lg-3" style="min-height: 100%;">
    <div class="row justify-content-center align-items-center mt-2 mb-2" style="position: relative;">
        <!-- Client Card -->
        <div class="col-12 col-sm-6 col-xl-3 col-xxl-2 text-center order-2 order-xl-1" style="max-width: 400px;">
            <div class="card text-center" style="border-color: #002D5D;">
                <div class="card-header p-0" style="background-color: #002D5D; color: white; font-weight: bold;">
                    Customer
                </div>
                <div class="card-body p-1">
                    <p class="card-text" style="color: #002D5D;">
                        <span *ngIf="internal; else externalBlock" class="mt-2">Internal</span>
                        <ng-template #externalBlock>
                            <span style="font-weight: bold;">
                                {{ticketInfo?.customer?.denominazione}}
                            </span><br>
                        </ng-template>
                        <span *ngIf="ticketInfo?.location">{{ticketInfo?.location}}</span>
                        <span *ngIf="!ticketInfo?.location">-</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- Title and Description -->
        <div class="col-12 col-xl-6 col-xxl-8 text-center order-1 order-xl-2">
            <div class="col-12 text-center" style="position: relative;">
                <span class="ticketTitle">{{ticketGeneralForm.get("title")?.value}}</span>
                <sup class="modifySup ms-2" (click)="modifyPopup(0)">
                    <i class="bi bi-pencil modifyIcon"></i>
                </sup>
            </div>
            <div class="col-12 text-center mt-3">
                <span class="ticketDescription"
                    style="font-size: small;">{{ticketGeneralForm.get("description")?.value}}</span>
            </div>
        </div>

        <!-- Status Card -->
        <div class="col-12 col-sm-6 col-xl-3 col-xxl-2 text-center order-3" style="max-width: 400px;">
            <div class="card text-center" style="border-color: #002D5D;">
                <div class="card-header p-0"
                    style="background-color: #002D5D; color: white; position: relative; font-weight: bold;">
                    Status
                    <!-- <sup class="modifySup ms-2" (click)="modifyPopup(1)">
                        <i class="bi bi-pencil modifyIconStatus" style="color: white;"></i>
                    </sup> -->
                </div>
                <div class="card-body p-1">
                    <p class="card-text" style="position: relative; color: #002D5D;">
                        <span style="font-weight: bold;">
                            {{status?.name}}
                            <i class="bi bi-circle-fill ms-2"></i>
                        </span><br>
                        <span style="font-weight: bold; font-size: small;">
                            {{status?.substatus?.name}}
                        </span>
                        <span *ngIf="status?.substatus == null" class="" style="font-size: small;">-</span><br>
                    </p>
                </div>
            </div>
        </div>

        <!-- <div class="col-12 mt-2 order-4 text-center">
            <button class="btn btn-outline-primary" [matMenuTriggerFor]="menu">
                Aggiungi Nuovo +
            </button>
        </div> -->

        <!-- <mat-menu #menu="matMenu">
            <button mat-menu-item>
                <mat-icon>dialpad</mat-icon>
                <span>Redial</span>
            </button>
            <button mat-menu-item disabled>
                <mat-icon>voicemail</mat-icon>
                <span>Check voice mail</span>
            </button>
            <button mat-menu-item>
                <mat-icon>notifications_off</mat-icon>
                <span>Disable alerts</span>
            </button>
        </mat-menu> -->
    </div>

    <mat-tab-group class="equal-width-tabs">
        <mat-tab class="justify-content-center text-center">
            <ng-template mat-tab-label>
                <span class="title">Ticket Info</span>
                <i class="bi bi-info-circle titleIcon"></i>
            </ng-template>
            <ng-template matTabContent>
                <app-ticket-info [data]="ticketInfo!"></app-ticket-info>
            </ng-template>
        </mat-tab>

        <mat-tab>
            <ng-template mat-tab-label>
                <span class="title">Works & Messages</span>
                <i class="bi bi-chat-left-text titleIcon"></i>
            </ng-template>
            <ng-template matTabContent>
                <app-ticket-timeline></app-ticket-timeline>
            </ng-template>
        </mat-tab>
    </mat-tab-group>
    <!-- 
    <mat-tab-group dynamicHeight>
        <mat-tab label="Short tab">
            <div class="example-small-box mat-elevation-z4">
                Small content
            </div>
        </mat-tab>
        <mat-tab label="Long tab">
            <div class="example-large-box mat-elevation-z4">
                Large content
            </div>
        </mat-tab>
    </mat-tab-group> -->
</div>



<div style="position: sticky; bottom: 100px; right: 20px; float: right; z-index: 1000;">
    <button class="btn btn-primary" [matMenuTriggerFor]="menu">
        <i class="bi bi-three-dots-vertical"></i>
    </button>
    <mat-menu #menu="matMenu">
        <button mat-menu-item>
            <i class="bi bi-person-raised-hand me-2"></i>
            <span>Take on Charge</span>
        </button>
        <button mat-menu-item>
            <i class="bi bi-tools me-2"></i>
            <span>Add Work</span>
        </button>
        <button mat-menu-item>
            <i class="bi bi-box-seam me-2"></i>
            <span>Add Article</span>
        </button>
        <button mat-menu-item>
            <i class="bi bi-chat-right-text me-2"></i>
            <span>Add Message</span>
        </button>
        <button mat-menu-item>
            <i class="bi bi-arrow-clockwise me-2"></i>
            <span>Change Status</span>
        </button>
    </mat-menu>
</div>