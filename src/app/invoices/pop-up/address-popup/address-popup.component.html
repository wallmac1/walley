<h2 mat-dialog-title align="center" class="justify-content-center" style="background-color: #002D5D;">
    <span *ngIf="idPopup == 1; else deletePopup" style="color: white; font-weight: bold; font-size: x-large;">
        {{"INVOICE.MODAL.MODIFYADDRESS" | translate }}
    </span>
    <ng-template #deletePopup>
        <span style="color: white; font-weight: bold; font-size: x-large;">
            {{"INVOICE.MODAL.DELETEADDRESS" | translate }}
        </span>
    </ng-template>
</h2>

<mat-dialog-content *ngIf="idPopup == 1">
    <div [formGroup]="addressForm" class="row justify-content-center align-items-center mt-1">

        <!-- DESCRIPTION -->
        <div class="col-12 col-lg-7">
            <label class="form-label" for="description">
                {{"INVOICE.ADDRESS.DESCRIPTION" | translate}}
            </label>
            <textarea class="form-control" type="text" id="description"
                formControlName="description" [rows]="descriptionRows"></textarea>
        </div>

        <!-- COUNTRY -->
        <div class="col-12 col-sm-6 col-md-4 col-lg-2">
            <label class="form-label" for="country">
                {{"INVOICE.ADDRESS.COUNTRY" | translate}}
            </label>
            <select class="form-select" id="country" formControlName="country">
                <option [value]="null">
                    --
                </option>
                <option *ngFor="let country of countriesList" [ngValue]="country.id">
                    {{country.common_name}}
                </option>
            </select>
        </div>

        <!-- CITY -->
        <div *ngIf="addressForm.get('country')?.value == 12; else notItalianBlock"
            class="col-12 col-sm-6 col-md-4 col-lg-3">
            <label class="form-label" for="city">{{"INVOICE.ADDRESS.MUNICIPALITY" | translate }}</label>
            <input type="text" matInput [matAutocomplete]="city" class="form-control" id="city"
                formControlName="city"
                [class.is-invalid]="addressForm.get('city')?.invalid && submitted">
            <mat-autocomplete #city="matAutocomplete" [displayWith]="displayCityName">
                <mat-option *ngFor="let option of filteredCities$ | async" [value]="option">
                    <div>
                        {{option.name}}
                    </div>
                </mat-option>
            </mat-autocomplete>
        </div>
        <ng-template #notItalianBlock>
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <label class="form-label" for="city">
                    {{"INVOICE.ADDRESS.CITY" | translate}}
                </label>
                <input class="form-control" type="text" id="city" formControlName="city">
            </div>
        </ng-template>

        <!-- PROVINCE -->
        <div class="col-12 col-sm-8 col-md-4 col-lg-3">
            <label class="form-label" for="province">
                {{"INVOICE.ADDRESS.PROVINCE" | translate}}
            </label>
            <input class="form-control" type="text" id="province" formControlName="province">
        </div>

        <!-- CAP -->
        <div class="col-12 col-sm-4 col-md-3 col-lg-2">
            <label class="form-label" for="postalCode">
                {{"INVOICE.ADDRESS.POSTALCODE" | translate}}
            </label>
            <input class="form-control" type="text" id="postalCode" formControlName="postalCode">
        </div>

        <!-- STREET -->
        <div class="col-12 col-sm-9 col-md-7 col-lg-6">
            <label class="form-label" for="street">
                {{"INVOICE.ADDRESS.STREET" | translate}}
            </label>
            <input class="form-control" type="text" id="street" formControlName="street">
        </div>

        <!-- NUMBER -->
        <div class="col-12 col-sm-3 col-md-2 col-lg-1">
            <label class="form-label" for="number">
                {{"INVOICE.ADDRESS.NUMBER" | translate}}
            </label>
            <input class="form-control" type="text" id="number" formControlName="number">
        </div>

        <!-- LEGAL OFFICE -->
        <div class="col-12 col-sm-6 ps-2 form-check">
            <label class="form-check-label ms-2" for="legalOffice">
                {{"INVOICE.ADDRESS.LEGALOFFICE" | translate}}
            </label>
            <input class="form-check-input mt-2 ms-1" type="checkbox" id="legalOffice"
                formControlName="legalOffice" style="height: 20px; width: 20px;">
        </div>

        <!-- MAIN OFFICE -->
        <div class="col-12 col-sm-6 ps-2 form-check">
            <label class="form-check-label ms-2" for="mainOffice">
                {{"INVOICE.ADDRESS.MAINOFFICE" | translate}}
            </label>
            <input class="form-check-input mt-2 ms-1" type="checkbox" id="mainOffice"
                formControlName="mainOffice" style="height: 20px; width: 20px;">
        </div>
    </div>
</mat-dialog-content>

<mat-dialog-actions align="end" style="border-top: 1px solid lightgray;">
    <button *ngIf="idPopup == 1" class="btn btn-outline-success me-2" (click)="saveAddress()">
        {{"INVOICE.MODAL.ADDNEW" | translate }}
    </button>
    <button *ngIf="idPopup == 2" class="btn btn-outline-success me-2" (click)="deleteAddress()">
        {{"INVOICE.MODAL.ADDNEW" | translate }}
    </button>
    <button class="btn btn-outline-dark me-2" (click)="close()">
        {{"INVOICE.MODAL.CANCEL" | translate }}
    </button>
</mat-dialog-actions>